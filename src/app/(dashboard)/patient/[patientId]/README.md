# ๐ฅ Patient Detail Page with WebSocket

ุตูุญุฉ ุชูุงุตูู ุงููุฑูุถ ูุน ุฏุนู WebSocket ููุชุญุฏูุซุงุช ุงููุจุงุดุฑุฉ.

## ๐ฏ ุงููุธุงุฆู ุงูุฑุฆูุณูุฉ

### ๐ ุฅุฏุงุฑุฉ ุงููุฑูุถ
- ุนุฑุถ ูุนูููุงุช ุงููุฑูุถ ุงูุดุฎุตูุฉ
- ุฅุฏุงุฑุฉ ุงูุฃุทุจุงุก ุงููุนุงูุฌูู
- ุชุญุฏูุซ ุจูุงูุงุช ุงููุฑูุถ
- ุฅุฏุงุฑุฉ ุงูููุถูุฉ

### ๐ค ุชูุงุฑูุฑ ุงูุฐูุงุก ุงูุงุตุทูุงุนู
- ุทูุจ ุชูุงุฑูุฑ AI ุฌุฏูุฏุฉ
- ุนุฑุถ ูุงุฆูุฉ ุงูุชูุงุฑูุฑ
- **ุชุญุฏูุซุงุช ูุจุงุดุฑุฉ ูุญุงูุฉ ุงูุชูุงุฑูุฑ** - **ุฌุฏูุฏ**

## ๐ WebSocket Integration

### ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ:
- โ **ุงุชุตุงู ุชููุงุฆู**: ุนูุฏ ูุชุญ ุตูุญุฉ ุงููุฑูุถ
- โ **ุงุดุชุฑุงู ูู ุงูุชูุงุฑูุฑ**: ุงูุงุดุชุฑุงู ุงูุชููุงุฆู ูู ุชูุงุฑูุฑ ุงููุฑูุถ
- โ **ุชุญุฏูุซุงุช ูุจุงุดุฑุฉ**: ุงุณุชูุจุงู ุชุญุฏูุซุงุช ุญุงูุฉ ุงูุชูุงุฑูุฑ ููุฑุงู
- โ **ูุคุดุฑ ุงูุญุงูุฉ**: ุนุฑุถ ุญุงูุฉ ุงูุงุชุตุงู ูู ุงููุงุฌูุฉ
- โ **ุฅุนุงุฏุฉ ุงูุงุชุตุงู**: ุฅุนุงุฏุฉ ุงูุงุชุตุงู ุงูุชููุงุฆู ุนูุฏ ุงููุทุงุน ุงูุงุชุตุงู

### ููููุฉ ุงูุนูู:

#### 1. **ุงุชุตุงู WebSocket**
```javascript
// ูู ุตูุญุฉ ุงููุฑูุถ
const {
  isConnected: wsConnected,
  isConnecting: wsConnecting,
  error: wsError,
  lastReportUpdate,
  isSubscribed,
  subscribedReports
} = usePatientWebSocket(patientId, reports, handleReportUpdate);
```

#### 2. **ูุนุงูุฌุฉ ุชุญุฏูุซุงุช ุงูุชูุงุฑูุฑ**
```javascript
const handleReportUpdate = useCallback((reportId, newStatus) => {
  console.log(`WebSocket: Updating report ${reportId} status to ${newStatus}`);
  
  setReports(prevReports => {
    return prevReports.map(report => {
      if (report.id === reportId) {
        return { ...report, status: newStatus };
      }
      return report;
    });
  });
}, []);
```

#### 3. **ูุคุดุฑ ุงูุญุงูุฉ**
```javascript
// ูุคุดุฑ ุญุงูุฉ WebSocket ูู ุฃุนูู ุงูุตูุญุฉ
<div className="fixed top-4 right-4 z-50">
  <div className={`px-3 py-1 rounded-full text-xs font-medium ${
    wsConnected 
      ? 'bg-green-100 text-green-800' 
      : wsConnecting 
      ? 'bg-yellow-100 text-yellow-800'
      : 'bg-red-100 text-red-800'
  }`}>
    {wsConnected ? '๐ข Live Updates' : wsConnecting ? '๐ก Connecting...' : '๐ด Offline'}
  </div>
</div>
```

## ๐ก ุชุฏูู ุงูุจูุงูุงุช

### 1. **ูุชุญ ุตูุญุฉ ุงููุฑูุถ**
```
1. ุชุญููู ุจูุงูุงุช ุงููุฑูุถ
2. ุชุญููู ุงูุชูุงุฑูุฑ
3. ุงูุงุชุตุงู ุจู WebSocket
4. ุงูุงุดุชุฑุงู ูู ุชูุงุฑูุฑ ุงููุฑูุถ
```

### 2. **ุงุณุชูุจุงู ุงูุชุญุฏูุซุงุช**
```
1. ุงูุฎุงุฏู ูุฑุณู: { type: 'report_status_update', report_id: '123', status: 'completed' }
2. WebSocket ูุณุชูุจู ุงูุฑุณุงูุฉ
3. ุชุญุฏูุซ ุญุงูุฉ ุงูุชูุฑูุฑ ูู ุงููุงุฌูุฉ
4. ุนุฑุถ ุงูุชุญุฏูุซ ููุฑุงู
```

### 3. **ุฅุถุงูุฉ ุชูุฑูุฑ ุฌุฏูุฏ**
```
1. ุฅูุดุงุก ุชูุฑูุฑ ุฌุฏูุฏ
2. ุฅุถุงูุฉ ุงูุชูุฑูุฑ ูููุงุฆูุฉ
3. ุงูุงุดุชุฑุงู ุงูุชููุงุฆู ูู ุงูุชูุฑูุฑ ุงูุฌุฏูุฏ
4. ุงุณุชูุจุงู ุชุญุฏูุซุงุช ุงูุชูุฑูุฑ
```

## ๐จ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ูุคุดุฑุงุช ุงูุญุงูุฉ:
- **๐ข Live Updates**: ูุชุตู ูุชููู ุชุญุฏูุซุงุช
- **๐ก Connecting...**: ุฌุงุฑู ุงูุงุชุตุงู
- **๐ด Offline**: ุบูุฑ ูุชุตู

### ูู ูุงุฆูุฉ ุงูุชูุงุฑูุฑ:
- **Live Updates**: ูุคุดุฑ ุฃุฎุถุฑ ุนูุฏ ุงูุงุชุตุงู
- **Offline**: ูุคุดุฑ ุฑูุงุฏู ุนูุฏ ุนุฏู ุงูุงุชุตุงู

## ๐ง ุงูุฅุนุฏุงุฏุงุช

### WebSocket URL:
```javascript
const wsUrl = `ws://localhost:5001/ws`;
```

### ุฎูุงุฑุงุช ุงูุงุชุตุงู:
```javascript
{
  maxReconnectAttempts: 5,
  reconnectInterval: 3000,
  heartbeatInterval: 30000,
  autoReconnect: true
}
```

## ๐ ุงูุฑุณุงุฆู ุงููุฏุนููุฉ

### ูู ุงูุฎุงุฏู ุฅูู ุงูุนููู:
```javascript
// ุชุญุฏูุซ ุญุงูุฉ ุงูุชูุฑูุฑ
{
  type: 'report_status_update',
  report_id: 'report-123',
  status: 'completed',
  patient_id: 'patient-456',
  timestamp: '2024-01-15T10:30:00.000Z'
}

// ุชุฃููุฏ ุงูุงุชุตุงู
{
  type: 'connection_established',
  client_id: 'client-123',
  message: 'Connected to global report status updates',
  timestamp: '2024-01-15T10:30:00.000Z'
}
```

### ูู ุงูุนููู ุฅูู ุงูุฎุงุฏู:
```javascript
// ุงูุงุดุชุฑุงู ูู ุชูุฑูุฑ
{
  type: 'subscribe_report',
  report_id: 'report-123',
  patient_id: 'patient-456'
}

// ุฅูุบุงุก ุงูุงุดุชุฑุงู
{
  type: 'unsubscribe_report',
  report_id: 'report-123'
}
```

## ๐ ุงููุฒุงูุง

### โ **ุชุญุฏูุซุงุช ููุฑูุฉ**
- ูุง ุญุงุฌุฉ ูุชุญุฏูุซ ุงูุตูุญุฉ
- ุชุญุฏูุซ ุญุงูุฉ ุงูุชูุงุฑูุฑ ููุฑุงู
- ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณูุฉ

### โ **ุงุชุตุงู ุฐูู**
- ุฅุนุงุฏุฉ ุงูุงุชุตุงู ุงูุชููุงุฆู
- ุฅุฏุงุฑุฉ ุงูุฃุฎุทุงุก
- ุชูุธูู ุชููุงุฆู

### โ **ูุงุฌูุฉ ุชูุงุนููุฉ**
- ูุคุดุฑุงุช ุญุงูุฉ ูุงุถุญุฉ
- ุชุญุฏูุซุงุช ุจุตุฑูุฉ
- ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุณุฉ

## ๐ ุงูุชุตุญูุญ

### ุณุฌูุงุช ุงูุชุทููุฑ:
```javascript
// ูู ูุญุฏุฉ ุชุญูู ุงููุชุตูุญ
console.log('WebSocket: Connected to patient reports');
console.log('WebSocket: Updating report 123 status to completed');
console.log('WebSocket: Last report update:', lastReportUpdate);
```

### ุญุงูุงุช ุงูุฃุฎุทุงุก:
- **ุงุชุตุงู ูุงุดู**: ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุงูุชููุงุฆูุฉ
- **ุฑุณุงูุฉ ุบูุฑ ุตุญูุญุฉ**: ุชุฌุงูู ุงูุฑุณุงูุฉ
- **ุงููุทุงุน ุงูุงุชุตุงู**: ุฅุนุงุฏุฉ ุงูุงุชุตุงู ุงูุชููุงุฆู

---

**๐ ููุงุญุธุฉ**: ุฌููุน ุงูุชุญุฏูุซุงุช ุชุชู ูู ุงูููุช ุงููุนูู ุฏูู ุงูุญุงุฌุฉ ูุชุญุฏูุซ ุงูุตูุญุฉ. 