# ๐ช Patient Hooks

ูุฐุง ุงููุฌูุฏ ูุญุชูู ุนูู React Hooks ูุฎุตุตุฉ ูุฅุฏุงุฑุฉ ุงููุฑุถู ูุงูุชูุงุฑูุฑ ูุงูุงุชุตุงูุงุช.

## ๐ ุงููููุงุช

### `useWebSocket.js`
Hook ูุชูุฏู ูุฅุฏุงุฑุฉ ุงุชุตุงูุงุช WebSocket ูุน ุฅุฏุงุฑุฉ ุฐููุฉ ููุญุงูุงุช.

#### ุงูููุฒุงุช:
- โ **ุฅุฏุงุฑุฉ ุงุชุตุงู ุฐููุฉ**: ุงุชุตุงู ูุงุญุฏ ูุน ุฅุนุงุฏุฉ ุงูุงุชุตุงู ุงูุชููุงุฆู
- โ **ูุธุงู Heartbeat**: ููุญูุงุธ ุนูู ุงูุงุชุตุงู ูุดุทุงู
- โ **ุฅุฏุงุฑุฉ ุงูุฃุฎุทุงุก**: ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก
- โ **ุฅุญุตุงุฆูุงุช ุงูุงุชุตุงู**: ุชุชุจุน ูุญุณู ููุญุงูุฉ
- โ **ุชูุธูู ุชููุงุฆู**: ุนูุฏ ุชุบููุฑ URL ุฃู ุฅูุบุงุก ุงููููู

#### ุงูุงุณุชุฎุฏุงู:
```javascript
import { useWebSocket } from './hooks';

const {
  isConnected,
  isConnecting,
  error,
  lastMessage,
  connectionStats,
  connect,
  disconnect,
  reconnect,
  sendMessage
} = useWebSocket('ws://localhost:5001/ws', {
  onMessage: (data) => console.log('Message received:', data),
  onOpen: () => console.log('Connected!'),
  onClose: () => console.log('Disconnected!'),
  onError: (error) => console.error('Error:', error),
  maxReconnectAttempts: 5,
  reconnectInterval: 3000,
  heartbeatInterval: 30000,
  autoReconnect: true
});
```

#### ุงูุญุงูุงุช ุงููุฏุนููุฉ:
- **CONNECTING**: ุงูุงุชุตุงู ููุฏ ุงูุชุฃุณูุณ
- **OPEN**: ุงูุงุชุตุงู ููุชูุญ ููุดุท
- **CLOSING**: ุงูุงุชุตุงู ููุฏ ุงูุฅุบูุงู
- **CLOSED**: ุงูุงุชุตุงู ูุบูู

### `useOrderReport.js`
Hook ูุฅุฏุงุฑุฉ ุทูุจุงุช ุงูุชูุงุฑูุฑ.

#### ุงูููุฒุงุช:
- โ **ุฅุฏุงุฑุฉ ุงูุญุงูุฉ**: ุชุชุจุน ุงูุชูุฑูุฑ ุงููุญุฏุฏ
- โ **ูุนุงูุฌุฉ ุงูุทูุจุงุช**: ุฅุฏุงุฑุฉ ุนูููุฉ ุงูุทูุจ
- โ **ุฅุนุงุฏุฉ ุชุนููู**: ุชูุธูู ุงูุญุงูุฉ ุจุนุฏ ุงูุทูุจ

#### ุงูุงุณุชุฎุฏุงู:
```javascript
import { useOrderReport } from './hooks';

const {
  selectedReport,
  isOrdering,
  handleReportSelect,
  handleOrderReport,
  handleCloseOrder
} = useOrderReport(patient, onReportCreated);
```

### `useReports.js`
Hook ูุฅุฏุงุฑุฉ ุงูุชูุงุฑูุฑ ูุชุญููููุง ุฅูู ุชูุณูู ููุงุณุจ.

#### ุงูููุฒุงุช:
- โ **ุชุญููู ุงูุจูุงูุงุช**: ุชุญููู ุงูุชูุงุฑูุฑ ุฅูู orders
- โ **ุฅุฏุงุฑุฉ ุงูุชุญููู**: ุญุงูุฉ ุงูุชุญููู
- โ **ุชุญุฏูุซ ุชููุงุฆู**: ุนูุฏ ุชุบููุฑ ุจูุงูุงุช ุงููุฑูุถ

#### ุงูุงุณุชุฎุฏุงู:
```javascript
import { useReports } from './hooks';

const { orders, loading } = useReports(patient);
```

## ๐ง ุงูุฎูุงุฑุงุช ุงููุชูุฏูุฉ

### WebSocket Options:
```javascript
const options = {
  // Callbacks
  onMessage: (data) => {},      // ุนูุฏ ุงุณุชูุจุงู ุฑุณุงูุฉ
  onOpen: () => {},            // ุนูุฏ ูุชุญ ุงูุงุชุตุงู
  onClose: (event) => {},      // ุนูุฏ ุฅุบูุงู ุงูุงุชุตุงู
  onError: (error) => {},      // ุนูุฏ ุญุฏูุซ ุฎุทุฃ
  
  // Reconnection
  maxReconnectAttempts: 5,     // ุนุฏุฏ ูุญุงููุงุช ุฅุนุงุฏุฉ ุงูุงุชุตุงู
  reconnectInterval: 3000,      // ุงููุงุตู ุจูู ุงููุญุงููุงุช (ms)
  autoReconnect: true,         // ุฅุนุงุฏุฉ ุงูุงุชุตุงู ุงูุชููุงุฆู
  
  // Heartbeat
  heartbeatInterval: 30000     // ูุงุตู Heartbeat (ms)
};
```

### ุงูุญุงูุงุช ุงููุฏุนููุฉ:
```javascript
// State
isConnected: boolean,           // ุงูุงุชุตุงู ูุดุท
isConnecting: boolean,          // ุงูุงุชุตุงู ููุฏ ุงูุชุฃุณูุณ
error: Error | null,           // ุฎุทุฃ ูู ุงูุงุชุตุงู
lastMessage: Object | null,    // ุขุฎุฑ ุฑุณุงูุฉ ูุณุชููุฉ
connectionStats: Object,       // ุฅุญุตุงุฆูุงุช ุงูุงุชุตุงู

// Actions
connect: Function,             // ุงูุงุชุตุงู ูุฏููุงู
disconnect: Function,          // ูุทุน ุงูุงุชุตุงู
reconnect: Function,           // ุฅุนุงุฏุฉ ุงูุงุชุตุงู
sendMessage: Function,         // ุฅุฑุณุงู ุฑุณุงูุฉ

// Utility
readyState: number            // ุญุงูุฉ ุงูุงุชุตุงู (0-3)
```

## ๐ ุฅุญุตุงุฆูุงุช ุงูุงุชุตุงู

```javascript
const connectionStats = {
  attempts: 0,                // ุนุฏุฏ ูุญุงููุงุช ุงูุงุชุตุงู
  lastConnected: "2024-01-15T10:30:00.000Z", // ุขุฎุฑ ุงุชุตุงู
  totalMessages: 42           // ุฅุฌูุงูู ุงูุฑุณุงุฆู ุงููุณุชููุฉ
};
```

## ๐ฏ ุฃูุถู ุงูููุงุฑุณุงุช

1. **ุงุณุชุฎุฏู cleanup**: ุชุฃูุฏ ูู ุชูุธูู ุงูุงุชุตุงู ุนูุฏ ุฅูุบุงุก ุงููููู
2. **ุชุญูู ูู ุงูุญุงูุฉ**: ุชุญูู ูู `isConnected` ูุจู ุฅุฑุณุงู ุงูุฑุณุงุฆู
3. **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**: ุงุณุชุฎุฏู `onError` ููุนุงูุฌุฉ ุงูุฃุฎุทุงุก
4. **Heartbeat**: ุงุณุชุฎุฏู ูุธุงู Heartbeat ููุญูุงุธ ุนูู ุงูุงุชุตุงู
5. **ุฅุนุงุฏุฉ ุงูุงุชุตุงู**: ุงุณูุญ ุจุฅุนุงุฏุฉ ุงูุงุชุตุงู ุงูุชููุงุฆู ููุญุงูุงุช ุงูุนุงุฏูุฉ

## ๐ ุชุฏูู ุงูุนูู

```
1. ุฅูุดุงุก Hook โ 2. ุงูุงุชุตุงู ุงูุชููุงุฆู โ 3. ุฅุฏุงุฑุฉ ุงูุฑุณุงุฆู โ 4. ุฅุนุงุฏุฉ ุงูุงุชุตุงู ุนูุฏ ุงูุญุงุฌุฉ
```

---

**๐ ููุงุญุธุฉ**: ุฌููุน Hooks ููุญุณููุฉ ููุฃุฏุงุก ูุณูููุฉ ุงูุงุณุชุฎุฏุงู. 